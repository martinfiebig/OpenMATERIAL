# Validate JSON schema files
# Source: https://github.com/GrantBirki/json-yaml-validate
# Forked from: https://github.com/marketplace/actions/json-yaml-validate
name: Validate JSON schemas for assets and materials

on:
  push:
    branches: [main, test-validation]
  pull_request:
    paths:
      - 'examples/**'
      - 'schemas/**'

jobs:
  validate-config:
    name: Validate GitHub Actions workflows

    runs-on: ubuntu-latest
    steps:
      - name: Checkout files
        uses: actions/checkout@v1

      - name: Validate asset JSON schemas
        uses: ammarlakis/action-ajv@master
        with:
          schema: ./schemas/asset_schema.json
          data: ./examples/*.xoma
          allErrors: true

      - name: Validate material JSON schemas
        uses: ammarlakis/action-ajv@master
        with:
          schema: ./schemas/material_schema.json
          data: ./examples/*.xomp
          allErrors: true

      - name: Validate electromagnetic material properties JSON schemas
        uses: ammarlakis/action-ajv@master
        with:
          schema: ./schemas/material_emp_schema.json
          data: ./examples/*_emp.xompt
          allErrors: true



#name: Validate JSON schemas for assets and materials

#on:
#  pull_request:
#    paths:
#      - 'examples/**'
 #     - 'schemas/**'
#
#jobs:
#  json-schema-validation:
#    name: JSON schema validation
#    runs-on: ubuntu-latest
#
#    steps:
#      - uses: actions/checkout@v1
#
#      - name: Validate asset JSON schemas
#        uses: nhalstead/validate-json-action@0.1.3
#        with:
#          schema: ./schemas/asset_schema.json
#          jsons: ./examples/*.xoma
#




#      - name: Validate material JSON schemas
#        uses: nhalstead/validate-json-action@0.1.3
#        with:
#          schema: ./schemas/material_schema.json
#          jsons: ./examples/*.xomp
#
#      - name: Validate electromagnetic material properties JSON schemas
#        uses: nhalstead/validate-json-action@0.1.3
#        with:
#          schema: ./schemas/material_emp_schema.json
#          jsons: ./examples/*_emp.xompt
#
#
####